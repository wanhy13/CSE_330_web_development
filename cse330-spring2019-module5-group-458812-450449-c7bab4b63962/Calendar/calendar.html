<!DOCTYPE html>

<head>
    <title>calendar</title>

    <script src="http://classes.engineering.wustl.edu/cse330/content/calendar.js"></script>
    <script src="http://classes.engineering.wustl.edu/cse330/content/calendar.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <style>
            #login1 { display:none }
            #signup{ display:none }
            #event{ display:none }
            #share{display: none}
            #gevent{ display:none }
          </style>
          <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css"
           type="text/css" rel="Stylesheet" /> 
          <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
          <script  src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js"></script>
          

    <meta charset="utf-8"/>
    
    <meta name ="viewport" content="width=device-width, intial-scale=1">
    <link rel = "stylesheet" href="calendar.css">   

</head>
<body>
    <div id="calendar_wrap">
        <!-- https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_calendar     -->
        
        <!-- TODO -->
        <div class="top" id = "top">
                <a class="navbar-brand" href="calendar.html">Calendar</a>
                <button type="button" id="login-btn" >Log in</button>   
                <button type="button" id="signup-btn" >Sign up</button>
                <button type="button" id="logout-btn">Log out</button>
                <button type="button" id="add-btn">event</button>
                <input type="checkbox" id = "show-a"> a </input>
                <input type="checkbox" id = "show-b"> b </input>
                <button type="button" id = "group_events"> group </input>
                <button type="button" id= "share-but">share</button>
                   
            </div>

        <div id="month">      
                    <ul style="list-style: none">
                      <li class="prev">
                          <button id="prev_month_btn" >&#10094;</button>
                      </li>
                      <li class="next">
                          <button id= "next_month_btn">&#10095;</button>
                        </li>
                      <li id ="header_month">
                        September<br>
                        <span style="font-size:18px">2017</span>
                      </li>
                    </ul>
                  </div>
        <div id="calendar">
            <ul class="weekdays">
                <li>Sun</li>
                <li>Mon</li>
                <li>Tue</li>
                <li>Wed</li>
                <li>Thu</li>
                <li>Fri</li>
                <li>Sat</li>
            </ul>
            <ul class="days" id="daysID">
                <li class="day" >
                        <div class = "date" >27</div>
        
                        </li>
                <li class="day" >
                        <div class = "date" >28</div>
                        </li>
                <li class="day" >
                        <div class = "date" >29</div>
        
                        </li>
                <li class="day" >
                        <div class = "date" >30</div>
        
                        </li>
                <li class="day" >
                        <div class = "date" >31</div>
        
                        </li>
                <li class="day" >
                        <div class = "date" >01</div>
        
                        </li>
                <li class="day" >
                        <div class = "date" >02</div>
        
                        </li>
                <li class="day" >
                    <div class = "date" >03</div>
                </li>
                <li class="day" >
                        <div class = "date" >04</div>
                    </li>
                <li class="day" >
                        <div class = "date" >05</div>
                </li>
                <li class="day" >
                        <div class = "date" >06</div>
                </li>
                <li class="day" >
                        <div class = "date" >07</div>
                </li>
                <li class="day" >
                        <div class = "date" >08</div>
                </li>
                <li class="day" >
                        <div class = "date" >09</div>
                </li>
                <li class="day" >
                        <div class = "date" >10</div>
                </li>
                <li class="day" >
                        <div class = "date" >11</div>
                </li>
                <li class="day" >
                        <div class = "date" >12</div>
                </li>
                <li class="day" >
                        <div class = "date" >13</div>
                </li>
                <li class="day" >
                        <div class = "date" >14</div>
                </li>
                <li class="day" >
                        <div class = "date" >15</div>
                </li>
                <li class="day">
                        <div class = "date" >16</div>
                </li>
                <li class="day" >
                        <div class = "date" >17</div>
                </li>
                <li class="day" >
                        <div class = "date" >18</div>
                </li>
                <li class="day" >
                        <div class = "date"  >19</div>
                </li>
                <li class="day" >
                        <div class = "date" >20</div>
                </li>
                <li class="day" >
                        <div class = "date" >21</div>
                </li>
                <li class="day" >
                        <div class = "date" >22</div>
                </li>
                <li class="day" >
                        <div class = "date" >23</div>
                </li>
                <li class="day" >
                        <div class = "date" >24</div>
                </li>
                <li class="day" >
                        <div class = "date" >25</div>
                </li>
                <li class="day" >
                        <div class = "date" >26</div>
                </li>
                <li class="day" >
                        <div class = "date" >27</div>
                </li>
                <li class="day" >
                        <div class = "date" >28</div>
                </li>
                <li class="day" >
                        <div class = "date" >29</div>
                </li>
                <li class="day" >
                        <div class = "date" >30</div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                <li class="day" >
                        <div class = "date" ></div>
                </li>
                
                
            </ul>
        </div>
    </div>
    <!-- login -->
    <div class="login" id="login1">
            <label>Username: <input type="text" id="login-username" /></label>
            <br>
            <label>Password: <input type="text" id="login-password" /></label>
            <br>
            <input type="submit" value="login" id="login"/>
            
    </div>
    <!-- share -->
    <div class="login" id="share">
            <label>Username: <input type="text" id="share-username" /></label>
            <br>
            <label>Password: <input type="text" id="share-password"/></label>
            <br>
            <input type="submit" value="share" id="sharesub"/>
            
    </div>

    <!-- singup -->
    <div id="signup">
            <label>Username: <input type="text" id="signup-username" /></label>
            <br>
            <label>Password: <input type="text" id="signup-password"/></label>
            <br>
            <input type="submit" value="sign" id="sign"/>
    </div>
    <!--add event dialog-->
    <div id="event">
            <input type="radio" name="method" id="groupa">a(default)</input>
            
            <input type="radio" name="method" id="groupb">b</input>
            <br>
            
            
        <label>Year:<input type="text" id="year" /></label>
        <label>Month:<input type="text" id="month2" /></label>
        <label>Day:<input type="text" id="day" /></label>
        <br>  
        <label>Time(00:00): <input type="text" id="time" /></label>
            <br>
            <label>activity: <input type="text" id="desc"/></label>
            <br>
            <input type="submit" value="add" id="add" />
    </div>
    <!--add group dialog-->
    <div id="gevent">
            <input type="radio" name="method" id="ggroupa">a(default)</input>
            <input type="radio" name="method" id="ggroupb">b</input>   
            <br>             
        <label>Year:(2017)<input type="text" id="gyear" /></label>
        <label>Month:(1)<input type="text" id="gmonth2" /></label>
        <label>Day:(5)<input type="text" id="gday" /></label>
        <br>  
        <label>Time(00:00): <input type="text" id="gtime" /></label>
            <br>
            <label>activity: <input type="text" id="gdesc"/></label>
            <br>
            <label>member1: <input type="text" id="member1"/></label>
            <br>
            <label>member2: <input type="text" id="member2"/></label>
            <br>
            <input type="submit" value="add" id="gadd" />
    </div>

    <script >
        function currentUser(){
            fetch('checkUser.php',{
                method:"POST",
                body: JSON.stringify(),
                headers:{'content-type':'application/json'}
            })
            .then(response => {
                // console.log("function work")
                if (response.username){
                    $("#login-btn").hide();
                    $("#singup-btn").hide();
                    
                }else{
                    $("#logout-btn").hide();
                    $("#add-btn").hide();
                }
            })
        }
        //console.log("document work")
        document.addEventListener("DOMContentLoaded", currentUser,false);
    </script>
    
    <script>
        function showlogindialog()
        {
          $("#login1").dialog();
        }
        document.getElementById("login-btn").addEventListener("click",showlogindialog,true);
      </script>


      <script >
        function showdialog()
        {
          $("#signup").dialog();
        }
        document.getElementById("signup-btn").addEventListener("click",showdialog,true);

      </script>

    <script >
        
    </script>

<!-- register js -->
    <script >
        document.getElementById("sign").addEventListener("click", function(event){
           
            $("#signup").dialog('close');
            const username = document.getElementById("signup-username").value;
            const password = document.getElementById("signup-password").value;
            const data = {'username':username, 'password':password};
            
            let xmlHttp = new XMLHttpRequest();
            // xmlHttp.open("POST","angel.php",true);
            // xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
            // xmlHttp.addEventListener("load",function(event){
            //     let jsonData = JSON.parse(event.target.responseText);
            //     if(jsonData.success){
            //         alert("welcome new user!");
            //     }else{
            //         alert("Register failed. Try again!");
            //     }
            // },false);
            // xmlHttp.send("username="+username+"&password="+password);
            fetch("angel.php", {
                method:'POST',
                body:JSON.stringify(data),
                headers:{'content-type':'application/json'}
            })
            .then(response => response.json())
            .then(data => {
            if(data.success){
                    // $("#login-btn").hide();
                    // $("#logout-btn").show();
                    // $("#add-btn").show()
                    // $("#signup-btn").hide();
                    alert("Sign up Successfully! Now try to login!");
                }else{
                alert( 'Signup failed+${data.message}' );}
            })

        },false);
        
        
    </script>
     
    
    
    
      
    
       
    <script src="calendar.js"></script>
   
    
</body>

